# MEC2.0 华为感知设备调研报告

[toc]

## 一、研发目标

- [MEC 需求分析](../prd/index.html)

## 二、华为文档

> 华为的部分文档是加密的，通过专有客户端本机查看。此文档中列出的是经程序解析转换的网页格式。

### 2.1. 华为机器视觉解决方案（全息路口）

此文档，面向运维工程师

- [文档指南](./data/holographic/zh-cn_topic_0000001083174645.html)
- [方案设计](./data/holographic/zh-cn_topic_0000001104093712.html)
- [解决方案交付流程](./data/holographic/zh-cn_topic_0000001242472995.html)
- [工勘](./data/holographic/zh-cn_topic_0000001159868229.html)
- [安装与调试](./data/holographic/zh-cn_topic_0251424796.html)
- [设备基础配置](./data/holographic/zh-cn_topic_0251428120.html)
- [全息路口雷视拟合任务](./data/holographic/zh-cn_topic_0000001242481973.html)
- [故障处理](./data/holographic/zh-cn_topic_0251419329.html)
- [维护](./data/holographic/zh-cn_topic_0000001159919955.html)
- [日志](./data/holographic/zh-cn_topic_0000001113399782.html)
- [附录](./data/holographic/zh-cn_topic_0000001159920399.html)

### 2.2. 开发参考文档

此文档，面向程序员

#### 2.2.1. ACC7320 毫米波雷达文档

- [ACC7320&ACC7322-通信协议(带鉴权)20210831](<./data/acc7320/ACC7320%26ACC7322-%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE(%E5%B8%A6%E9%89%B4%E6%9D%83)20210831.html>)
- [ACC7320 安装配置](./data/acc7320/ACC7320%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE.html)
- [ACC7320-无锡所型检报告 （802）](./data/acc7320/ACC7320-%E6%97%A0%E9%94%A1%E6%89%80%E5%9E%8B%E6%A3%80%E6%8A%A5%E5%91%8A%20%EF%BC%88802%EF%BC%89.html)
- [ACC7320 对外协议-250](./data/acc7320/ACC7320%E5%AF%B9%E5%A4%96%E5%8D%8F%E8%AE%AE-250.html)
- [用户使用手册-ACC7320(V10.9)-20211228](<./data/acc7320/%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-ACC7320(V10.9)-20211228.html>)

##### PDF 版本

- [ACC7320&ACC7322-通信协议(带鉴权)20210831](<./data/acc7320/ACC7320%26ACC7322-%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE(%E5%B8%A6%E9%89%B4%E6%9D%83)20210831.pdf>)
- [ACC7320 安装配置](./data/acc7320/ACC7320%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE.pdf)
- [ACC7320-无锡所型检报告 （802）](./data/acc7320/ACC7320-%E6%97%A0%E9%94%A1%E6%89%80%E5%9E%8B%E6%A3%80%E6%8A%A5%E5%91%8A%20%EF%BC%88802%EF%BC%89.pdf)
- [ACC7320 对外协议-250](./data/acc7320/ACC7320%E5%AF%B9%E5%A4%96%E5%8D%8F%E8%AE%AE-250.pdf)
- [用户使用手册-ACC7320(V10.9)-20211228](<./data/acc7320/%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-ACC7320(V10.9)-20211228.pdf>)

#### 2.2.2. 华为 SDC 摄像机文档

- [华为 SDC9.0.0APP 开发指南](<./data/sdc/%E5%8D%8E%E4%B8%BASDC9.0.0APP%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97(pdf).pdf.html>)
- [华为 SDC9.0.0MIB 参考](./data/sdc/%E5%8D%8E%E4%B8%BASDC9.0.0MIB%E5%8F%82%E8%80%83.pdf.html)
- [华为 SDC9.0.0OMAPI 协议说明](<./data/sdc/%E5%8D%8E%E4%B8%BASDC9.0.0OMAPI%E5%8D%8F%E8%AE%AE%E8%AF%B4%E6%98%8E(pdf).pdf.html>)
- [华为 SDC 配套件安装专题](<./data/sdc/%E5%8D%8E%E4%B8%BASDC%E9%85%8D%E5%A5%97%E4%BB%B6%E5%AE%89%E8%A3%85%E4%B8%93%E9%A2%98(html).pdf.html>)
- [HoloSensSDC 全网智能接口对接 TLV 数据详解](./data/sdc/HoloSensSDC%E5%85%A8%E7%BD%91%E6%99%BA%E8%83%BD%E6%8E%A5%E5%8F%A3%E5%AF%B9%E6%8E%A5TLV%E6%95%B0%E6%8D%AE%E8%AF%A6%E8%A7%A3.pdf.html)
- [HoloSensSDCAPI 协议说明](./data/sdc/HoloSensSDCAPI%E5%8D%8F%E8%AE%AE%E8%AF%B4%E6%98%8E.pdf.html)

##### PDF 版本

- [华为 SDC9.0.0APP 开发指南](<./data/sdc/%E5%8D%8E%E4%B8%BASDC9.0.0APP%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97(pdf).pdf>)
- [华为 SDC9.0.0MIB 参考](./data/sdc/%E5%8D%8E%E4%B8%BASDC9.0.0MIB%E5%8F%82%E8%80%83.pdf)
- [华为 SDC9.0.0OMAPI 协议说明](<./data/sdc/%E5%8D%8E%E4%B8%BASDC9.0.0OMAPI%E5%8D%8F%E8%AE%AE%E8%AF%B4%E6%98%8E(pdf).pdf>)
- [华为 SDC 配套件安装专题](<./data/sdc/%E5%8D%8E%E4%B8%BASDC%E9%85%8D%E5%A5%97%E4%BB%B6%E5%AE%89%E8%A3%85%E4%B8%93%E9%A2%98(html).pdf>)
- [HoloSensSDC 全网智能接口对接 TLV 数据详解](./data/sdc/HoloSensSDC%E5%85%A8%E7%BD%91%E6%99%BA%E8%83%BD%E6%8E%A5%E5%8F%A3%E5%AF%B9%E6%8E%A5TLV%E6%95%B0%E6%8D%AE%E8%AF%A6%E8%A7%A3.pdf)
- [HoloSensSDCAPI 协议说明](./data/sdc/HoloSensSDCAPI%E5%8D%8F%E8%AE%AE%E8%AF%B4%E6%98%8E.pdf)

#### 2.2.3. 华为 ITS800 边缘计算文档

- [ITS8009.1.0 通用接口(雷达)](<./data/its800/ITS8009.1.0%E9%80%9A%E7%94%A8%E6%8E%A5%E5%8F%A3(%E9%9B%B7%E8%BE%BE).pdf.html>)
- [IVS1800&ITS8009.1.0 接口参考(RESTFUL)](<./data/its800/IVS1800%26ITS8009.1.0%E6%8E%A5%E5%8F%A3%E5%8F%82%E8%80%83(RESTFUL).pdf.html>)
- [IVS1800&ITS8009.1.0 接口参考(RESTFUL&GAT1400)](<./data/its800/IVS1800%26ITS8009.1.0%E6%8E%A5%E5%8F%A3%E5%8F%82%E8%80%83(RESTFUL%26GAT1400).pdf.html>)
- [IVS1800&ITS8009.1.0 算法开发指南(基于昇腾 310)](<./data/its800/IVS1800%26ITS8009.1.0%E7%AE%97%E6%B3%95%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97(%E5%9F%BA%E4%BA%8E%E6%98%87%E8%85%BE310).pdf.html>)
- [IVS1800&ITS8009.1.0MIB 接口参考](./data/its800/IVS1800%26ITS8009.1.0MIB%E6%8E%A5%E5%8F%A3%E5%8F%82%E8%80%83.pdf.html)

##### PDF 版本

- [ITS8009.1.0 通用接口(雷达)](<./data/its800/ITS8009.1.0%E9%80%9A%E7%94%A8%E6%8E%A5%E5%8F%A3(%E9%9B%B7%E8%BE%BE).pdf>)
- [IVS1800&ITS8009.1.0 接口参考(RESTFUL)](<./data/its800/IVS1800%26ITS8009.1.0%E6%8E%A5%E5%8F%A3%E5%8F%82%E8%80%83(RESTFUL).pdf>)
- [IVS1800&ITS8009.1.0 接口参考(RESTFUL&GAT1400)](<./data/its800/IVS1800%26ITS8009.1.0%E6%8E%A5%E5%8F%A3%E5%8F%82%E8%80%83(RESTFUL%26GAT1400).pdf>)
- [IVS1800&ITS8009.1.0 算法开发指南(基于昇腾 310)](<./data/its800/IVS1800%26ITS8009.1.0%E7%AE%97%E6%B3%95%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97(%E5%9F%BA%E4%BA%8E%E6%98%87%E8%85%BE310).pdf>)
- [IVS1800&ITS8009.1.0MIB 接口参考](./data/its800/IVS1800%26ITS8009.1.0MIB%E6%8E%A5%E5%8F%A3%E5%8F%82%E8%80%83.pdf)

## 三、感知设备文档，重点解读

### 3.1. 华为的方案，its800 是必备的

- [了解设备的作用和关系](./data/holographic/zh-cn_topic_0000001150613655.html)
- [了解路侧部署配置过程](./data/holographic/zh-cn_topic_0000001242472995.html)
- [了解配置路口雷视拟合任务](./data/holographic/zh-cn_topic_0000001218036374.html)

> 分析：雷视拟合配置是在 its800 上完成的，根据以上分析，[华为机器视觉解决方案全息路口](./report.html#华为机器视觉解决方案全息路口)，依赖于 its800 这款边缘计算设备。从以上文档仅能了解华为标定融合的大概过程，不能明确具体算法细节。而，我们边缘计算 MEC2.0 计划就是要实现标定融合算法。

### 3.2. 华为的毫米波雷达，返回的是结构化数据

- [第三章数据帧格式](<./data/acc7320/ACC7320%26ACC7322-通信协议(带鉴权)20210831.html#[4,%22XYZ%22,88,519,null]>)

雷达通过 TCP/IP 协议通信:

- 雷达作为服务器端
- 上位机（边缘计算）作为客户端。

通讯过程：

1. 上位机连接雷达；
2. 上位机请求鉴权，进行登录验证；
3. 雷达向上位机发送目标信息等数据。

帧格式：（表中每行为 1 个字节，十六进制显示） 帧头 固定为 0xDB 帧号 详见三四五章节 帧长度 帧内字节长度（n+5），包括 DB、帧号、校验和、DC 内容帧 1 内容帧 1 内容帧 内容帧 2 ………………………. ………………………. 内容帧 内容帧 n 校验位 校验和字节 校验和为除 DB、DC、检验位外所有字节的和对 256 取余的结果。 帧尾 固定为 0xDC

注：对于发送端，帧长度、校验和为转译前的值；对于接收端为转译后的值。

> 分析，毫米波雷达返回了结构化的数据，但并不具有定位信息。雷达坐标到 GPS 绝对定位坐标的转换算法，可能是在 its800 上完成的。

### 3.3. 经华为 its800 处理后的雷达结构化数据

- [华为 its800 处理后的雷达数据](<./data/its800/ITS8009.1.0%E9%80%9A%E7%94%A8%E6%8E%A5%E5%8F%A3(%E9%9B%B7%E8%BE%BE).pdf.html>)

> 分析，经处理后，雷达结构化数据中具有了绝对坐标。

### 3.4. 华为的 SDC 摄像机，架构很大

- [SDC APP 开发指南 - 第三页软件架构简介](<./data/sdc/%E5%8D%8E%E4%B8%BASDC9.0.0APP%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97(pdf).pdf.html>)

开发相关：

- 语言 c++，编译器：第 15 页，APP 软件发布、安装、运行环境规范
- 第 225 页，第三方 APP 算法的工作流程
- 第 219 页，FAQ
- 第 21 页，视频相关服务化接口
- 第 73 页，给摄像机加载训练好的 AI 模型

> 分析以上，智能业务 APP 层，是我们需要研发的应用。底层依赖华为的 SDC OS 操作系统层。华为摄像机也有一定的算力，可以运算模型。可返回部分数据，但不能直接满足车路协同 0180 接口要求，需要在 its800 中进一步的开发 APP 或使用华为提供的 its800 的接口（后面会看到 its800 雷视数据拟合处理的 api）

> 基于此文档开发的智能算法 app，可以上架华为算法商店。如果华为官方提供的数据拟合不能满足要求，那么这个雷视拟合算法 APP 就需要我们基于这个 SDC OS 来实现。

### 3.5. 华为 SDC 摄像机，管理 API

- [华为 SDC OM API 协议说明](<./data/sdc/%E5%8D%8E%E4%B8%BASDC9.0.0OMAPI%E5%8D%8F%E8%AE%AE%E8%AF%B4%E6%98%8E(pdf).pdf.html>)

> 普通 rest 接口，都是一些基本的用于远程原理摄像机的接口，接口列表在第 13 页

### 3.6. 华为摄像机，TLV 协议

- [TLV 和 ASN - 知乎](https://zhuanlan.zhihu.com/p/62317518)
- [TLV 接口](./data/sdc/HoloSensSDC%E5%85%A8%E7%BD%91%E6%99%BA%E8%83%BD%E6%8E%A5%E5%8F%A3%E5%AF%B9%E6%8E%A5TLV%E6%95%B0%E6%8D%AE%E8%AF%A6%E8%A7%A3.pdf.html)

> 此接口文档与车路协同 MEC 需求贴合度比较高。

相关接口：

- 第 185 页，混合目标检测，机动车带有坐标
- 第 77 页，机动车车流量统计
- 第 120 页，部分事件类型

> 此文档仅有 tlv 接口内容的说明，具体连接方式在下面文档中，可作为下面文档报文内容格式的补充。

### 3.7. HoloSens SDC API 协议说明

- [REST AAPI](./data/sdc/HoloSensSDCAPI%E5%8D%8F%E8%AE%AE%E8%AF%B4%E6%98%8E.pdf.html)

相关接口：

- 第 858 页，目标检测配置 api
- 第 958 页，部分事件配置 api

> 摄像机对外提供的 rest 方式的 api，大都是管理 api，少量订阅 api。
> 具体协议格式，见上面第 6 条《TLV》

## 四、ITS800 研发文档

- 1. [ITS8009.1.0 通用接口(雷达)](<./data/its800/ITS8009.1.0%E9%80%9A%E7%94%A8%E6%8E%A5%E5%8F%A3(%E9%9B%B7%E8%BE%BE).pdf.html>)
- 2. [IVS1800&ITS8009.1.0 接口参考(RESTFUL&GAT1400)](<./data/its800/IVS1800%26ITS8009.1.0%E6%8E%A5%E5%8F%A3%E5%8F%82%E8%80%83(RESTFUL%26GAT1400).pdf.html>)
- 3. [IVS1800&ITS8009.1.0 算法开发指南(基于昇腾 310)](<./data/its800/IVS1800%26ITS8009.1.0%E7%AE%97%E6%B3%95%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97(%E5%9F%BA%E4%BA%8E%E6%98%87%E8%85%BE310).pdf.html>)

> 以上三个文档，都需要仔细阅读。华为是自建了一个边缘计算的生态，设备和算法都是强耦合在一起的。

> 华为提供的算法的雷视目标检测接口在：第 2 条文档中，第 1011 页，上传自动采集雷视动向拟合。

> 关于事件（布防）在：第2条文档中，第1002页，上传自动采集机动车违法。

## 五、调研结论

1. 路侧可以整套采用华为设备和软件套件。
2. 如果只采用华为摄像机和华为第三方公司的毫米波雷达，用自研MEC替换掉ITS800，研发难度大、周期长。

